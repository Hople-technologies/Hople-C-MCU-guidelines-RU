Object.assign(window.search, {"doc_urls":["hople_c_mcu_guidlines.html#Методические-рекомендации-hople-по-программированию-на-С-для-микроконтроллеров","C_guidlines.html#Правила-оформления-кода-на-С","lib_types.html#Типы-библиотек","inimp_list.html#Список-официальный-inimp-библиотек","inimp_list.html#Взаимодействие-с-микросхемами"],"index":{"documentStore":{"docInfo":{"0":{"body":8,"breadcrumbs":1,"title":1},"1":{"body":0,"breadcrumbs":0,"title":0},"2":{"body":49,"breadcrumbs":0,"title":0},"3":{"body":6,"breadcrumbs":1,"title":1},"4":{"body":1,"breadcrumbs":0,"title":0}},"docs":{"0":{"body":"В Hople мы высокого ценим эффективность и качество во всех всех аспектах деятельности. Программное обеспечение для микроконтроллеров не является исключением. Мы считаем, что унификация способов разработки и тестирования - важный этап повышения качества и эффективности разработки программного обеспечения для встраиваемых систем. Имея в виду данную идею мы разработали и продолжаем обновлять этот набор правил и методов разработки и тестирования программного обеспечения встраиваемых систем. В данном материале описаны : наши методические рекомендации по оформлению кода, написанного на язык С; наш взгляд на разделение кода на независимые компоненты (библиотеки) и наш подход к унификации данных компонентов; наш подход к тестированию и отладке встраиваемых систем. /Что-то, что я допишу потом, когда это что-то появится/ Данная информация распространяется свободно в соответствии с лицензией /написать лицензию/ . Эта документация доступна на нескольких языках : English ; Русский . Мы активно приветствуем исправления и улучшения документа . Правила внесения исправления могут быть найдены в документе CONTRIBUTING.md в соответствующем репозитории на gitHub: English source gitHub Русский исходник gitHub","breadcrumbs":"Методические рекомендации Hople по программированию на С для микроконтроллеров","id":"0","title":"Методические рекомендации Hople по программированию на С для микроконтроллеров"},"1":{"body":"","breadcrumbs":"Правила оформления кода на С","id":"1","title":"Правила оформления кода на С"},"2":{"body":"При разработке программного обеспечения для микроконтроллеров мы выделяем 3 вида библиотек: библиотеки реализации (implementation); библиотеки не зависящие от реализации (implementation independent); чистые библиотеки (pure). Перед тем, как объяснить, зачем необходим каждый тип библиотек, нужно понять ситуации, возникающую при разработке программного обеспечения для микроконтроллеров: внутри современных микроконтроллеров находится большое количество периферии, соответственно каждая отдельная ножка может быть отнесена к большому количеству различных периферийных устройств; настройка этих периферийных устройств может сильно отличаться как между различными производителями микроконтроллеров, так и между различными семействами одного типа микроконтроллера; после добавления микроконтроллера на печатную плату, задачи всех ножек уже известны и не будут изменяться в процессе работы устройства; Программирование микроконтроллеров начинается с настройки и реализации взаимодействия с периферией (например считывание показаний АЦП, передачи данных по интерфейсам связи или генерации ШИМ-сигнала). Код реализующий непосредственную настройку, а также взаимодействие с периферией можно назвать \"программным обеспечением уровня железа\", важной особенностью этого совершенно условного типа программного обеспечения является то, что оно будет отличаться для различных семейств микроконтроллеров, и даже для одинаковых микроконтроллеров, установленных в различные устройства (так как требуемый от МК функционал может отличаться). На следующем \"уровне\" программного обеспечения реализуется логика обработки данных, полученных от периферии (например различные преобразования: показаний АЦП в определенный физический параметр или данный полученных от IMU в углы или скорости изменения углов). Важной особенность кода на этом уровне является то, что он полностью не зависит от конкретной реализации взаимодействия с периферией, но опирается на это взаимодействие (Например алгоритму вычисления значения физического параметра нет разницы, каким именно образом были получены данные из АЦП, а вот что имеет значения, так это разрядность АЦП и интервал времени между измерениями, но при этом данный алгоритм может работать только в паре с настроенным под конкретные параметры АЦП и не имеет никакого смысла в полностью оторванном от железа состоянии). Данный код можно назвать зависящим от периферии, но не зависящим от реализации , так как она опирается на наличие и параметры определенной периферии, но не зависит от конкретных способов взаимодействия с этой периферией. На \"самом высоком уровне\" находится программное обеспечение, полностью независящее от конкретного железа, на котором запускается. В основном это код для различного рода вычислений (например вычисления положение объекта в пространстве по углам, с IMU или использование вычисленных физических параметров для проведения моделирования какого-либо вида) или общей логики работы программы (операционные системы реального времени, конечные автоматы и так далее). Все три описанных выше типа являются условными и не имеют строгих границ, однако что важно, практически любое программное обеспечение под микроконтроллеры можно разделить между этими типами. Библиотеки, реализующие методы \"высокого уровня\" мы будем называть чистыми (pure libraries) . Библиотеки опирающиеся на периферию, но не зависящие от реализации взаимодействия с это периферией мы будем называть не зависящими от реализации(implementation independent libraries) . Библиотеки, реализующие настройку и взаимодействие с периферией мы будем называть библиотеками реализации (implementation libraries) . Чистые библиотеки по определению являются унифицированными и могут быть использованы на любых видах микроконтроллеров любых производителей, и вообще при разработке любого вида программного обеспечения. Разделение библиотек на implementation и implementation independent, позволяет разрабатывать унифицированное программное обеспечение с возможностью запуска на любых устройствах, имеющих в наличии необходимую для запуска кода периферию. Для обеспечения унификации implementation independent-библиотеки (далее inimp-библиотеки) должны выдвигать требования к implementation-библиотекам (далее imp-библиотеки) по реализации конкретного интерфейса обмена данными: то есть набора функций, возвращающих конкретные значения от конкретной периферии. В свою очередь imp-библиотеки должны предоставлять необходимые функции взаимодействия с периферией конкретного микроконтроллера. Например inimp-библиотека взаимодействия с микросхемой гироскопа/акселерометра должна требовать от Implementation библиотеки конкретной настройки параметров интерфейса SPI (частоты передачи, данных, вида сообщения и так далее), а также предоставления функции, которая бы позволяла отправлять байт по интерфейсу SPI и возвращала бы байт, полученный этим интерфейсом. При этом Implementation библиотеки совершенно не важно, к акому именно SPI на микроконтроллере будет подключена микросхема. Со своей стороны imp-библиотека должна настроить SPI к которому подключена микросхема передачи данных на требуемые параметры и предоставить функцию соответствующую требованиям inimp-библиотеки для данного конкретного SPI, после чего inimp-библиотека может воспользоваться указателем на данную функцию для реализации логики обмена данными. Это очень простой пример того, как можно разделить зоны ответственности между различными библиотеками, написанная один раз inimp-библиотека может свободно переноситься между любыми устройствами при условии, что для них будет написана imp-библиотека. Под imp-библиотекой мы подразумеваем чуть больше чем реализацию конкретных функций для конкретного микроконтроллера, подробнее об этом можно почитать в подглаве, описывающей нашу архитектуру imp-библиотек. Для При этом imp-библиотека это в целом очень опциональная вещь, которая в современной ситуации может быть реализована производителем микроконтроллеров в том или ином виде. Например STMicroelectronics предоставляет приложение CubeMX, с помощью которого можно интерактивно настроить ножки и параметры периферии, а также библиотеку HAL, которая реализует большое количество функций взаимодействия с периферией (например ту же функцию передачи одного байта по заданному SPI с возвращением полученного байта), что может значительно ускорить разработку при условии наличия готовой inimp-библиотеки. Это было очень высокоуровневое описание нашей идеи разделения программного обеспечения для микроконтроллеров на типы. Подробнее о том, в каком именно виде мы представляем каждый тип библиотек написано в соответствующих подглавах. Нашей основной целью является продвижение идеи inimp-библиотек и станадртизация их оформления для обеспечения более унифицированного взаимодействия между различными устройствами., как так как библиотеки, реализующие работу с периферией часто предоставляются компаниями-производителями микросхем, а чистые библиотеки не имеют никаких принципиальных проблемы для чего мы предлагаем правила оформления кода, выдвижения и описания требований, (В это описание надо со временем привести побольше примеров с кодом и пару картинок, разъясняющих ситуацию) Сейчас еще задумался о том, что impi-библиотеки это именно библиотеки взаимодействия с какого-то рода конкретными устройствами (микросхемами или каскадами) и возможно есть смысл ввести еще четвертый тип библиотек, схожих по наполнению с impi, но необходимых для реализации логики работы какого-то конкретного устройства - что-то, что я когда-то называл device-библиотеками, но это надо смотреть на практике Важно еще написать что вообще подразумевается под библиотекой (мол это не один .h-файл, а их набор, главный из которых имеет в названии нужный постфикс)","breadcrumbs":"Типы библиотек","id":"2","title":"Типы библиотек"},"3":{"body":"В данном списке находятся только open-source inimp-библиотеки, полностью соответствующие правилам Hople. Формат записи библиотек: /Название библиотеки/ - /полная ссылка на репозиорй/ - /Разработчик/ - /Дата последней проверки соответствия библиотеки правилам Hople (не указывается для библиотек разработанных в Hople)/ /Краткое описание/","breadcrumbs":"Список официальный inimp-библиотек","id":"3","title":"Список официальный inimp-библиотек"},"4":{"body":"NRF_24l01p_inimp","breadcrumbs":"Взаимодействие с микросхемами","id":"4","title":"Взаимодействие с микросхемами"}},"length":5,"save":true},"fields":["title","body","breadcrumbs"],"index":{"body":{"root":{"3":{"df":1,"docs":{"2":{"tf":1.0}}},"c":{"df":0,"docs":{},"o":{"df":0,"docs":{},"n":{"df":0,"docs":{},"t":{"df":0,"docs":{},"r":{"df":0,"docs":{},"i":{"b":{"df":0,"docs":{},"u":{"df":0,"docs":{},"t":{"df":0,"docs":{},"i":{"df":0,"docs":{},"n":{"df":0,"docs":{},"g":{".":{"df":0,"docs":{},"m":{"d":{"df":1,"docs":{"0":{"tf":1.0}}},"df":0,"docs":{}}},"df":0,"docs":{}}}}}}},"df":0,"docs":{}}}}}},"u":{"b":{"df":0,"docs":{},"e":{"df":0,"docs":{},"m":{"df":0,"docs":{},"x":{"df":1,"docs":{"2":{"tf":1.0}}}}}},"df":0,"docs":{}}},"d":{"df":0,"docs":{},"e":{"df":0,"docs":{},"v":{"df":0,"docs":{},"i":{"c":{"df":1,"docs":{"2":{"tf":1.0}}},"df":0,"docs":{}}}}},"df":0,"docs":{},"e":{"df":0,"docs":{},"n":{"df":0,"docs":{},"g":{"df":0,"docs":{},"l":{"df":0,"docs":{},"i":{"df":0,"docs":{},"s":{"df":0,"docs":{},"h":{"df":1,"docs":{"0":{"tf":1.4142135623730951}}}}}}}}},"g":{"df":0,"docs":{},"i":{"df":0,"docs":{},"t":{"df":0,"docs":{},"h":{"df":0,"docs":{},"u":{"b":{"df":1,"docs":{"0":{"tf":1.7320508075688772}}},"df":0,"docs":{}}}}}},"h":{"a":{"df":0,"docs":{},"l":{"df":1,"docs":{"2":{"tf":1.0}}}},"df":1,"docs":{"2":{"tf":1.0}},"o":{"df":0,"docs":{},"p":{"df":0,"docs":{},"l":{"df":2,"docs":{"0":{"tf":1.4142135623730951},"3":{"tf":1.7320508075688772}}}}}},"i":{"df":0,"docs":{},"m":{"df":0,"docs":{},"p":{"df":1,"docs":{"2":{"tf":2.6457513110645907}},"i":{"df":1,"docs":{"2":{"tf":1.4142135623730951}}},"l":{"df":0,"docs":{},"e":{"df":0,"docs":{},"m":{"df":0,"docs":{},"e":{"df":0,"docs":{},"n":{"df":0,"docs":{},"t":{"df":1,"docs":{"2":{"tf":3.1622776601683795}}}}}}}}},"u":{"df":1,"docs":{"2":{"tf":1.4142135623730951}}}},"n":{"d":{"df":0,"docs":{},"e":{"df":0,"docs":{},"p":{"df":0,"docs":{},"e":{"df":0,"docs":{},"n":{"d":{"df":1,"docs":{"2":{"tf":2.0}}},"df":0,"docs":{}}}}}},"df":0,"docs":{},"i":{"df":0,"docs":{},"m":{"df":0,"docs":{},"p":{"df":2,"docs":{"2":{"tf":2.6457513110645907},"3":{"tf":1.4142135623730951}}}}}}},"l":{"df":0,"docs":{},"i":{"b":{"df":0,"docs":{},"r":{"a":{"df":0,"docs":{},"r":{"df":0,"docs":{},"i":{"df":1,"docs":{"2":{"tf":1.7320508075688772}}}}},"df":0,"docs":{}}},"df":0,"docs":{}}},"n":{"df":0,"docs":{},"r":{"df":0,"docs":{},"f":{"_":{"2":{"4":{"df":0,"docs":{},"l":{"0":{"1":{"df":0,"docs":{},"p":{"_":{"df":0,"docs":{},"i":{"df":0,"docs":{},"n":{"df":0,"docs":{},"i":{"df":0,"docs":{},"m":{"df":0,"docs":{},"p":{"df":1,"docs":{"4":{"tf":1.0}}}}}}}},"df":0,"docs":{}}},"df":0,"docs":{}},"df":0,"docs":{}}},"df":0,"docs":{}},"df":0,"docs":{}},"df":0,"docs":{}}}},"o":{"df":0,"docs":{},"p":{"df":0,"docs":{},"e":{"df":0,"docs":{},"n":{"df":1,"docs":{"3":{"tf":1.0}}}}}},"p":{"df":0,"docs":{},"u":{"df":0,"docs":{},"r":{"df":0,"docs":{},"e":{"df":1,"docs":{"2":{"tf":1.4142135623730951}}}}}},"s":{"df":0,"docs":{},"o":{"df":0,"docs":{},"u":{"df":0,"docs":{},"r":{"c":{"df":2,"docs":{"0":{"tf":1.0},"3":{"tf":1.0}}},"df":0,"docs":{}}}},"p":{"df":0,"docs":{},"i":{"df":1,"docs":{"2":{"tf":2.449489742783178}}}},"t":{"df":0,"docs":{},"m":{"df":0,"docs":{},"i":{"c":{"df":0,"docs":{},"r":{"df":0,"docs":{},"o":{"df":0,"docs":{},"e":{"df":0,"docs":{},"l":{"df":0,"docs":{},"e":{"c":{"df":0,"docs":{},"t":{"df":0,"docs":{},"r":{"df":0,"docs":{},"o":{"df":0,"docs":{},"n":{"df":1,"docs":{"2":{"tf":1.0}}}}}}},"df":0,"docs":{}}}}}}},"df":0,"docs":{}}}}}}},"breadcrumbs":{"root":{"3":{"df":1,"docs":{"2":{"tf":1.0}}},"c":{"df":0,"docs":{},"o":{"df":0,"docs":{},"n":{"df":0,"docs":{},"t":{"df":0,"docs":{},"r":{"df":0,"docs":{},"i":{"b":{"df":0,"docs":{},"u":{"df":0,"docs":{},"t":{"df":0,"docs":{},"i":{"df":0,"docs":{},"n":{"df":0,"docs":{},"g":{".":{"df":0,"docs":{},"m":{"d":{"df":1,"docs":{"0":{"tf":1.0}}},"df":0,"docs":{}}},"df":0,"docs":{}}}}}}},"df":0,"docs":{}}}}}},"u":{"b":{"df":0,"docs":{},"e":{"df":0,"docs":{},"m":{"df":0,"docs":{},"x":{"df":1,"docs":{"2":{"tf":1.0}}}}}},"df":0,"docs":{}}},"d":{"df":0,"docs":{},"e":{"df":0,"docs":{},"v":{"df":0,"docs":{},"i":{"c":{"df":1,"docs":{"2":{"tf":1.0}}},"df":0,"docs":{}}}}},"df":0,"docs":{},"e":{"df":0,"docs":{},"n":{"df":0,"docs":{},"g":{"df":0,"docs":{},"l":{"df":0,"docs":{},"i":{"df":0,"docs":{},"s":{"df":0,"docs":{},"h":{"df":1,"docs":{"0":{"tf":1.4142135623730951}}}}}}}}},"g":{"df":0,"docs":{},"i":{"df":0,"docs":{},"t":{"df":0,"docs":{},"h":{"df":0,"docs":{},"u":{"b":{"df":1,"docs":{"0":{"tf":1.7320508075688772}}},"df":0,"docs":{}}}}}},"h":{"a":{"df":0,"docs":{},"l":{"df":1,"docs":{"2":{"tf":1.0}}}},"df":1,"docs":{"2":{"tf":1.0}},"o":{"df":0,"docs":{},"p":{"df":0,"docs":{},"l":{"df":2,"docs":{"0":{"tf":1.7320508075688772},"3":{"tf":1.7320508075688772}}}}}},"i":{"df":0,"docs":{},"m":{"df":0,"docs":{},"p":{"df":1,"docs":{"2":{"tf":2.6457513110645907}},"i":{"df":1,"docs":{"2":{"tf":1.4142135623730951}}},"l":{"df":0,"docs":{},"e":{"df":0,"docs":{},"m":{"df":0,"docs":{},"e":{"df":0,"docs":{},"n":{"df":0,"docs":{},"t":{"df":1,"docs":{"2":{"tf":3.1622776601683795}}}}}}}}},"u":{"df":1,"docs":{"2":{"tf":1.4142135623730951}}}},"n":{"d":{"df":0,"docs":{},"e":{"df":0,"docs":{},"p":{"df":0,"docs":{},"e":{"df":0,"docs":{},"n":{"d":{"df":1,"docs":{"2":{"tf":2.0}}},"df":0,"docs":{}}}}}},"df":0,"docs":{},"i":{"df":0,"docs":{},"m":{"df":0,"docs":{},"p":{"df":2,"docs":{"2":{"tf":2.6457513110645907},"3":{"tf":1.7320508075688772}}}}}}},"l":{"df":0,"docs":{},"i":{"b":{"df":0,"docs":{},"r":{"a":{"df":0,"docs":{},"r":{"df":0,"docs":{},"i":{"df":1,"docs":{"2":{"tf":1.7320508075688772}}}}},"df":0,"docs":{}}},"df":0,"docs":{}}},"n":{"df":0,"docs":{},"r":{"df":0,"docs":{},"f":{"_":{"2":{"4":{"df":0,"docs":{},"l":{"0":{"1":{"df":0,"docs":{},"p":{"_":{"df":0,"docs":{},"i":{"df":0,"docs":{},"n":{"df":0,"docs":{},"i":{"df":0,"docs":{},"m":{"df":0,"docs":{},"p":{"df":1,"docs":{"4":{"tf":1.0}}}}}}}},"df":0,"docs":{}}},"df":0,"docs":{}},"df":0,"docs":{}}},"df":0,"docs":{}},"df":0,"docs":{}},"df":0,"docs":{}}}},"o":{"df":0,"docs":{},"p":{"df":0,"docs":{},"e":{"df":0,"docs":{},"n":{"df":1,"docs":{"3":{"tf":1.0}}}}}},"p":{"df":0,"docs":{},"u":{"df":0,"docs":{},"r":{"df":0,"docs":{},"e":{"df":1,"docs":{"2":{"tf":1.4142135623730951}}}}}},"s":{"df":0,"docs":{},"o":{"df":0,"docs":{},"u":{"df":0,"docs":{},"r":{"c":{"df":2,"docs":{"0":{"tf":1.0},"3":{"tf":1.0}}},"df":0,"docs":{}}}},"p":{"df":0,"docs":{},"i":{"df":1,"docs":{"2":{"tf":2.449489742783178}}}},"t":{"df":0,"docs":{},"m":{"df":0,"docs":{},"i":{"c":{"df":0,"docs":{},"r":{"df":0,"docs":{},"o":{"df":0,"docs":{},"e":{"df":0,"docs":{},"l":{"df":0,"docs":{},"e":{"c":{"df":0,"docs":{},"t":{"df":0,"docs":{},"r":{"df":0,"docs":{},"o":{"df":0,"docs":{},"n":{"df":1,"docs":{"2":{"tf":1.0}}}}}}},"df":0,"docs":{}}}}}}},"df":0,"docs":{}}}}}}},"title":{"root":{"df":0,"docs":{},"h":{"df":0,"docs":{},"o":{"df":0,"docs":{},"p":{"df":0,"docs":{},"l":{"df":1,"docs":{"0":{"tf":1.0}}}}}},"i":{"df":0,"docs":{},"n":{"df":0,"docs":{},"i":{"df":0,"docs":{},"m":{"df":0,"docs":{},"p":{"df":1,"docs":{"3":{"tf":1.0}}}}}}}}}},"lang":"English","pipeline":["trimmer","stopWordFilter","stemmer"],"ref":"id","version":"0.9.5"},"results_options":{"limit_results":30,"teaser_word_count":30},"search_options":{"bool":"OR","expand":true,"fields":{"body":{"boost":1},"breadcrumbs":{"boost":1},"title":{"boost":2}}}});